#! /user/bin/env node
// -d --root 静态文件目录 -o --host 主机 -p --port 端口号
import yargs from "yargs";
import Server from "../src/app.js";

let argv = yargs
  .option("d", {
    alias: "root",
    demand: "false",
    type: "string",
    default: process.cwd,
    description: "静态文件目录",
  })
  .option("o", {
    alias: "host",
    demand: "false",
    default: "localhost",
    description: "请配置监听的主机",
  })
  .option("d", {
    alias: "port",
    demand: "false",
    type: "number",
    default: "8000",
    description: "请配置端口号",
  })
  .usage("zf-server2 [options]") // 用法示例
  .example(
    "zf-server2 -d / -p 8000 -o localhos",
    "在本机的8000端口上启动一个静态资源服务器, 并指定静态文件目录为当前目录"
  )
  .help("h").argv;

// argv = {d, root, o, host, p, port}
// 启动服务
let server = new Server(argv);
server.start();
// 命令行中的命令指向了 npm 目录 bat 文件（package.json 中的 bin 参数），二 bat 文件又指向了当前目录的 www 文件