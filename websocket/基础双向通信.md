# http vs websocket

## 不使用 websocket 如何实现双向通信
Comet, 实现服务端向客户端推送数据

主要方法:
- 轮询
- 长轮询
- IFrame
- sse EventSource
- WebSocket


### 轮询
客户端定时向服务器发送请求，询问是否有新消息，有新消息则返回给客户端。

优点：实现简单，不需要任何特殊的支持。
缺点：请求过多，浪费带宽和服务器资源; 竞速问题: 无法保证请求的先后顺序; 每个请求都有 http 报文, 额外的数据消耗.

### 长轮询
客户端发起一个请求后，服务器会一直保持该连接，直到有新消息时才返回响应给客户端。客户端收到响应后再次发出请求，如此循环。

优点：解决了请求过多和竞速问题。
缺点: 服务器会一直保持连接，会增加服务器的压力; 链接堆叠问题;

### Iframe
通过 iframe 发送一个 HTTP 请求，并监听请求的响应。

### sse EventSource
html 提供的, 单项通信, 客户端可以监控服务端推送的事件, 只能推送文本类型的.

缺点: 只能从服务端发到客户端. 格式只能纯文本

### websocket
优势: 双向通信\持久连接\信令少\天生支持跨域通信


## WebSocket


